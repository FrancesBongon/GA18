<?php
$conn = mysqli_connect("localhost","root","","class_db");

// I discovered two wrongs in this scenario
// Wrong #1: There are no quotes on $email which causes SQL error
// $sql = "UPDATE students SET email=$email WHERE id=$id";

// Wrong #2: There is also no error checking. So even if it fails, the code will still print "Updated!"
// $res = mysqli_query($conn, $sql);
// echo "Updated!";

$id = $_POST['id'];
$email = $_POST['email'];

// Correct #1: I added quotes and also used a prepared statement to be safe
$stmt = $conn->prepare("UPDATE students SET email=? WHERE id=?");
$stmt->bind_param("si", $email, $id);
$success = $stmt->execute();

// Correct #2: Used if and else for error checking
if($success) {
    echo "Updated!";
} else {
    echo "Error: " . $stmt->error;
}

/*
I used a prepared statement and added ? placeholders that treat the email 
as a string and the id as an integer. I also added error checking to 
determine whether the update was successful or if there was a SQL error, 
so it will not simply print "Updated!" even if the query fails.
*/

?>
